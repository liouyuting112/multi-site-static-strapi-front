# 百站引流系統流程圖

本文檔包含系統的各種流程圖，使用 Mermaid 格式繪製。

---

## 1. 整體工作流程

```mermaid
graph TD
    A[開始：規劃新網站] --> B[使用 AI 生成靜態網站]
    B --> C[靜態網頁品質檢查]
    C --> D{檢查通過?}
    D -->|否| E[修正問題]
    E --> C
    D -->|是| F[上傳網站到 GitHub]
    F --> G[設定 CMS 後台]
    G --> H[部署到 Vercel]
    H --> I[網站上線]
    
    I --> J[日常內容更新]
    J --> K[在 CMS 後台新增/編輯文章]
    K --> L[自動同步到 GitHub]
    L --> M[自動部署到 Vercel]
    M --> N[內容更新完成]
    
    style A fill:#e1f5ff
    style I fill:#c8e6c9
    style N fill:#c8e6c9
    style D fill:#fff9c4
```

---

## 2. 新網站建立流程

```mermaid
graph LR
    A[1. 準備網站需求] --> B[2. AI 生成靜態網站]
    B --> C[3. 下載並檢查圖片]
    C --> D[4. 品質檢查]
    D --> E{5. 檢查通過?}
    E -->|否| F[修正問題]
    F --> D
    E -->|是| G[6. 上傳到 GitHub]
    G --> H[7. 設定 CMS 欄位]
    H --> I[8. 部署到 Vercel]
    I --> J[9. 網站上線]
    
    style A fill:#e1f5ff
    style J fill:#c8e6c9
    style E fill:#fff9c4
```

---

## 3. 日常內容更新流程

```mermaid
graph LR
    A[1. 準備文章內容] --> B[2. 使用 AI 生成文章 HTML]
    B --> C[3. 上傳到 CMS 後台]
    C --> D[4. 自動同步到 GitHub]
    D --> E[5. 自動部署到 Vercel]
    E --> F[6. 內容更新完成]
    
    style A fill:#e1f5ff
    style F fill:#c8e6c9
```

---

## 4. 系統架構圖

```mermaid
graph TB
    subgraph "開發環境"
        A[Cursor AI 編輯器] --> B[靜態網站檔案]
        B --> C[GitHub 倉庫]
    end
    
    subgraph "內容管理"
        D[Strapi CMS 後台] --> E[MySQL 資料庫]
        F[上傳腳本] --> D
    end
    
    subgraph "部署環境"
        C --> G[Vercel 自動部署]
        G --> H[線上網站]
    end
    
    subgraph "內容同步"
        D --> I[匯出腳本]
        I --> C
        C --> G
    end
    
    style A fill:#e1f5ff
    style D fill:#fff9c4
    style H fill:#c8e6c9
```

---

## 5. 資料流程圖

```mermaid
sequenceDiagram
    participant User as 使用者
    participant AI as AI 工具
    participant CMS as Strapi CMS
    participant Git as GitHub
    participant Vercel as Vercel
    
    User->>AI: 提供提詞生成內容
    AI->>User: 返回 HTML 內容
    User->>CMS: 上傳內容到 CMS
    CMS->>CMS: 儲存到資料庫
    Note over CMS,Git: 定時或手動觸發
    CMS->>Git: 匯出腳本同步內容
    Git->>Vercel: 自動偵測更新
    Vercel->>Vercel: 自動部署
    Vercel->>User: 網站更新完成
```

---

## 6. 內容上傳流程（詳細）

```mermaid
graph LR
    A[讀取 HTML 檔案] --> B[解析檔案內容]
    B --> C[提取 metadata]
    C --> D[判斷內容類型]
    D --> E{Page 或 Post?}
    E -->|Page| F[查詢現有 Page]
    E -->|Post| G[查詢現有 Post]
    F --> H{存在?}
    G --> I{存在?}
    H -->|是| J[更新 Page API]
    H -->|否| K[建立 Page API]
    I -->|是| L[更新 Post API]
    I -->|否| M[建立 Post API]
    J --> N[完成]
    K --> N
    L --> N
    M --> N
    
    style A fill:#e1f5ff
    style N fill:#c8e6c9
    style E fill:#fff9c4
    style H fill:#fff9c4
    style I fill:#fff9c4
```

---

## 7. Git 工作流程

```mermaid
graph LR
    A[開發新功能] --> B[推送到 develop]
    B --> C[測試確認]
    C --> D[合併到 main]
    D --> E[Vercel 自動部署]
    
    style A fill:#e1f5ff
    style E fill:#c8e6c9
```

---

## 8. Vercel 自動部署流程

```mermaid
graph LR
    A[GitHub Push] --> B[Vercel Webhook 觸發]
    B --> C[自動建置]
    C --> D[部署到對應環境]
    D --> E[部署完成通知]
    
    style A fill:#e1f5ff
    style E fill:#c8e6c9
```

---

## 9. 品質檢查流程

```mermaid
graph TD
    A[開始品質檢查] --> B[基本結構檢查]
    B --> C[導覽列功能檢查]
    C --> D[響應式設計檢查]
    D --> E[網站格式檢查]
    E --> F[JavaScript 功能檢查]
    F --> G[圖片資源檢查]
    G --> H[SEO 優化檢查]
    H --> I[效能檢查]
    I --> J[跨瀏覽器相容檢查]
    J --> K{所有檢查通過?}
    K -->|否| L[記錄問題]
    L --> M[修正問題]
    M --> A
    K -->|是| N[檢查完成]
    
    style A fill:#e1f5ff
    style N fill:#c8e6c9
    style K fill:#fff9c4
```

---

## 10. 故障排除流程

```mermaid
graph TD
    A[發現問題] --> B[檢查錯誤訊息]
    B --> C{問題類型?}
    C -->|API 錯誤| D[檢查 Token 與連線]
    C -->|Git 錯誤| E[檢查分支與認證]
    C -->|部署錯誤| F[檢查 Vercel 設定]
    C -->|功能錯誤| G[檢查程式碼與日誌]
    D --> H{問題解決?}
    E --> H
    F --> H
    G --> H
    H -->|是| I[問題解決]
    H -->|否| J[查閱文件或尋求協助]
    J --> K[記錄解決方案]
    K --> I
    
    style A fill:#ffcdd2
    style I fill:#c8e6c9
    style H fill:#fff9c4
```

---

## 使用說明

以上流程圖使用 Mermaid 格式繪製，可在以下環境中查看：

1. **GitHub**：直接在 Markdown 檔案中顯示
2. **VS Code**：安裝 Mermaid 擴充功能
3. **線上工具**：https://mermaid.live/

如需修改流程圖，請編輯對應的 Mermaid 程式碼。

---

**文件結束**


