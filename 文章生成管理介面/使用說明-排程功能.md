# 排程功能使用說明

## 📅 排程功能特色

✅ **自動執行** - 設定時間後自動執行，無需手動操作  
✅ **使用當天日期** - 排程執行時自動使用當天日期生成文章  
✅ **手動指定日期** - 也可以指定固定日期  
✅ **排程管理** - 可以啟用/停用/刪除排程  
✅ **持久化儲存** - 排程設定會自動儲存，重啟後仍有效  

---

## 🚀 快速開始

### 步驟 1：建立排程

1. 在「執行模式」中選擇「建立排程」
2. 選擇要生成文章的網站
3. 設定每個網站生成幾篇文章
4. 設定執行時間（例如：09:00）
5. 選擇日期模式：
   - ✅ **使用當天日期**（推薦）：每天執行時使用當天的日期
   - ❌ **指定日期**：使用固定的日期
6. 輸入排程名稱（例如：「每天上午9點生成文章」）
7. 點擊「📅 建立排程」

### 步驟 2：管理排程

在「排程管理」區域可以看到所有已建立的排程：

- **啟用/停用**：點擊「啟用」或「停用」按鈕
- **刪除**：點擊「刪除」按鈕

---

## 📋 使用情境

### 情境 1：每天自動生成今天文章

**設定：**
- 執行模式：建立排程
- 網站：選擇所有網站（或特定網站）
- 文章數量：每個網站 1 篇
- 執行時間：09:00
- ✅ 使用當天日期
- 排程名稱：「每天上午9點生成今天文章」

**結果：**
- 每天上午 9:00 自動執行
- 使用當天的日期生成文章
- 例如：12/25 執行 → 生成 12/25 的文章

---

### 情境 2：每天生成多篇文章

**設定：**
- 執行模式：建立排程
- 網站：選擇所有網站
- 文章數量：每個網站 2-3 篇
- 執行時間：09:00
- ✅ 使用當天日期
- 排程名稱：「每天生成2篇今天文章」

**結果：**
- 每天上午 9:00 自動執行
- 每個網站生成 2 篇文章
- 都使用當天的日期

---

### 情境 3：補齊特定日期的文章

**設定：**
- 執行模式：建立排程
- 網站：選擇需要補齊的網站
- 文章數量：每個網站 2 篇
- 執行時間：10:00
- ❌ 不使用當天日期
- 指定日期：2025-12-20
- 排程名稱：「補齊12/20文章」

**結果：**
- 每天上午 10:00 自動執行
- 生成 2025-12-20 的文章
- 執行一次後可以刪除排程

---

## ⚙️ 進階設定

### 多個排程

可以建立多個排程，例如：
- 排程 1：每天 09:00 生成今天文章（所有網站，1篇）
- 排程 2：每天 14:00 生成今天文章（特定網站，2篇）
- 排程 3：每天 18:00 補齊昨天文章（所有網站，1篇）

### 排程儲存

排程設定會自動儲存在 `schedules.json` 檔案中，即使重啟伺服器也會保留。

---

## ❓ 常見問題

### Q: 排程會自動執行嗎？
**A:** 是的，只要排程是「啟用」狀態，就會在設定的時間自動執行。

### Q: 如何確認排程是否正在運行？
**A:** 查看伺服器終端機的輸出，會顯示排程執行記錄。

### Q: 可以暫停排程嗎？
**A:** 可以，點擊「停用」按鈕即可暫停，點擊「啟用」可恢復。

### Q: 排程執行時使用什麼日期？
**A:** 
- 如果勾選「使用當天日期」→ 使用執行當天的日期
- 如果取消勾選 → 使用指定的固定日期

### Q: 可以修改已建立的排程嗎？
**A:** 目前需要刪除後重新建立，或直接修改 `schedules.json` 檔案。

---

## 🔧 技術說明

### Cron 表達式

排程使用 cron 表達式，格式為：`分鐘 小時 * * *`

例如：
- `0 9 * * *` = 每天 09:00
- `30 14 * * *` = 每天 14:30
- `0 0 * * *` = 每天 00:00（午夜）

### 時區

排程使用 `Asia/Taipei` 時區，確保時間準確。

---

## 📝 注意事項

1. **伺服器必須運行**：排程只有在伺服器運行時才會執行
2. **日期格式**：日期格式為 `YYYY-MM-DD`（例如：2025-12-25）
3. **時間格式**：時間格式為 `HH:MM`（例如：09:00）
4. **排程檔案**：`schedules.json` 會自動建立，不要手動刪除


